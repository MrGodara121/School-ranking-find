<!-- Premium Box Component - Promotes Premium Membership -->
<div class="premium-box">
    <!-- Premium Badge -->
    <div class="premium-badge">
        <span class="premium-icon">‚≠ê</span>
        <span class="premium-label">PREMIUM</span>
    </div>
    
    <!-- Premium Content -->
    <div class="premium-content" id="premium-content">
        <h4 class="premium-title">Unlock Premium Features</h4>
        
        <ul class="premium-features">
            <li class="feature-item">
                <span class="feature-check">‚úì</span>
                <span class="feature-text">Detailed parent reviews</span>
            </li>
            <li class="feature-item">
                <span class="feature-check">‚úì</span>
                <span class="feature-text">Compare up to 5 schools</span>
            </li>
            <li class="feature-item">
                <span class="feature-check">‚úì</span>
                <span class="feature-text">Ad-free experience</span>
            </li>
            <li class="feature-item">
                <span class="feature-check">‚úì</span>
                <span class="feature-text">Downloadable reports</span>
            </li>
            <li class="feature-item">
                <span class="feature-check">‚úì</span>
                <span class="feature-text">College readiness data</span>
            </li>
        </ul>
        
        <!-- Pricing -->
        <div class="premium-pricing">
            <div class="price-card monthly">
                <span class="price-period">Monthly</span>
                <span class="price-amount">$[PREMIUM_PRICE_MONTHLY]</span>
                <span class="price-billing">billed monthly</span>
            </div>
            
            <div class="price-card yearly popular">
                <div class="popular-badge">BEST VALUE</div>
                <span class="price-period">Yearly</span>
                <span class="price-amount">$[PREMIUM_PRICE_YEARLY]</span>
                <span class="price-billing">billed annually</span>
                <span class="price-savings">Save 20%</span>
            </div>
        </div>
        
        <!-- CTA Buttons -->
        <div class="premium-actions">
            <button class="btn-premium" id="upgrade-monthly" onclick="upgradeToPremium('monthly')">
                Start Monthly Plan
            </button>
            
            <button class="btn-premium btn-premium-primary" id="upgrade-yearly" onclick="upgradeToPremium('yearly')">
                Start Yearly Plan
                <span class="btn-savings">Save 20%</span>
            </button>
        </div>
        
        <!-- Money Back Guarantee -->
        <div class="guarantee">
            <span class="guarantee-icon">üõ°Ô∏è</span>
            <span class="guarantee-text">30-day money-back guarantee</span>
        </div>
        
        <!-- Trust Badges -->
        <div class="payment-badges">
            <span class="payment-badge">Secure SSL</span>
            <span class="payment-badge">üí≥ Credit Card</span>
            <span class="payment-badge">üí∞ PayPal</span>
        </div>
        
        <!-- Login Link -->
        <p class="login-prompt">
            Already have an account? <a href="/login.html">Sign In</a>
        </p>
    </div>
    
    <!-- Premium Active State (shown when user is premium) -->
    <div class="premium-active" id="premium-active" style="display: none;">
        <div class="premium-active-icon">‚≠ê</div>
        <h4 class="premium-active-title">You're a Premium Member!</h4>
        <p class="premium-active-text">Thank you for supporting [SITE_NAME]</p>
        
        <div class="premium-active-features">
            <p>‚ú® Access to all premium features</p>
            <p>üìä Unlimited school comparisons</p>
            <p>üì± Ad-free experience</p>
        </div>
        
        <div class="premium-active-footer">
            <a href="/account.html" class="btn-outline">Manage Account</a>
            <p class="expiry-text" id="premium-expiry">Valid until: [EXPIRY_DATE]</p>
        </div>
    </div>
</div>

<!-- JavaScript for Premium Box -->
<script>
(function() {
    class PremiumBox {
        constructor() {
            this.content = document.getElementById('premium-content');
            this.active = document.getElementById('premium-active');
            this.expirySpan = document.getElementById('premium-expiry');
            
            this.checkPremiumStatus();
        }
        
        checkPremiumStatus() {
            // Check if user is logged in and has premium
            const premiumData = this.getPremiumFromStorage();
            
            if (premiumData && premiumData.isActive) {
                this.showPremiumActive(premiumData);
            } else {
                this.showPremiumUpsell();
            }
        }
        
        getPremiumFromStorage() {
            // Check localStorage first
            const stored = localStorage.getItem('premium_status');
            if (stored) {
                try {
                    return JSON.parse(stored);
                } catch (e) {
                    return null;
                }
            }
            
            // Check cookies
            const premiumCookie = Utils.getCookie('premium_status');
            if (premiumCookie) {
                try {
                    return JSON.parse(decodeURIComponent(premiumCookie));
                } catch (e) {
                    return null;
                }
            }
            
            return null;
        }
        
        showPremiumActive(data) {
            if (this.content) this.content.style.display = 'none';
            if (this.active) {
                this.active.style.display = 'block';
                if (this.expirySpan && data.expiryDate) {
                    this.expirySpan.textContent = `Valid until: ${Utils.formatDate(data.expiryDate)}`;
                }
            }
        }
        
        showPremiumUpsell() {
            if (this.content) this.content.style.display = 'block';
            if (this.active) this.active.style.display = 'none';
        }
    }
    
    // Initialize premium box
    document.addEventListener('DOMContentLoaded', () => {
        window.premiumBox = new PremiumBox();
    });
    
    // Upgrade function
    window.upgradeToPremium = function(plan) {
        // Check if user is logged in
        const isLoggedIn = Utils.getCookie('session_id');
        
        if (!isLoggedIn) {
            // Store intended plan and redirect to signup
            localStorage.setItem('intended_plan', plan);
            window.location.href = '/signup.html?redirect=premium';
            return;
        }
        
        // Redirect to checkout with plan
        window.location.href = `/checkout.html?plan=${plan}`;
    };
})();
</script>

<!-- CSS for Premium Box -->
<style>
.premium-box {
    background: white;
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 8px 30px rgba(0,0,0,0.12);
    border: 1px solid #e9ecef;
    position: relative;
    overflow: hidden;
}

.premium-badge {
    position: absolute;
    top: 1rem;
    right: 1rem;
    background: linear-gradient(135deg, #f39c12, #e67e22);
    color: white;
    padding: 0.25rem 0.75rem;
    border-radius: 50px;
    font-size: 0.8rem;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.25rem;
    z-index: 1;
}

.premium-icon {
    font-size: 0.9rem;
}

.premium-label {
    letter-spacing: 0.5px;
}

/* Premium Content */
.premium-content {
    position: relative;
    z-index: 1;
}

.premium-title {
    font-size: 1.25rem;
    margin: 0 0 1rem 0;
    color: var(--dark, #2d3436);
    text-align: center;
}

/* Features List */
.premium-features {
    list-style: none;
    padding: 0;
    margin: 0 0 1.5rem 0;
}

.feature-item {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
    font-size: 0.95rem;
}

.feature-check {
    color: #27ae60;
    font-weight: bold;
    font-size: 1.1rem;
}

.feature-text {
    color: var(--dark, #2d3436);
}

/* Pricing */
.premium-pricing {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.price-card {
    background: var(--light-gray, #f8f9fa);
    padding: 1rem;
    border-radius: 12px;
    text-align: center;
    position: relative;
    transition: transform 0.3s ease;
}

.price-card:hover {
    transform: translateY(-2px);
}

.price-card.popular {
    background: linear-gradient(135deg, #fff3e0, #ffe0b2);
    border: 2px solid #f39c12;
}

.popular-badge {
    position: absolute;
    top: -10px;
    left: 50%;
    transform: translateX(-50%);
    background: #f39c12;
    color: white;
    padding: 0.2rem 1rem;
    border-radius: 50px;
    font-size: 0.7rem;
    font-weight: 600;
    white-space: nowrap;
}

.price-period {
    display: block;
    font-size: 0.9rem;
    color: var(--gray, #636e72);
    margin-bottom: 0.25rem;
}

.price-amount {
    display: block;
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--dark, #2d3436);
    margin-bottom: 0.25rem;
}

.price-billing {
    display: block;
    font-size: 0.7rem;
    color: var(--gray, #636e72);
}

.price-savings {
    display: block;
    font-size: 0.7rem;
    color: #27ae60;
    font-weight: 600;
    margin-top: 0.25rem;
}

/* CTA Buttons */
.premium-actions {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

.btn-premium {
    padding: 0.75rem 1rem;
    border: 2px solid #e9ecef;
    border-radius: 50px;
    background: white;
    color: var(--dark, #2d3436);
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.btn-premium:hover {
    background: var(--light-gray, #f8f9fa);
    transform: translateY(-2px);
}

.btn-premium-primary {
    background: linear-gradient(135deg, #f39c12, #e67e22);
    border-color: #f39c12;
    color: white;
}

.btn-premium-primary:hover {
    background: linear-gradient(135deg, #e67e22, #d35400);
    box-shadow: 0 4px 15px rgba(243, 156, 18, 0.3);
}

.btn-savings {
    background: rgba(255,255,255,0.2);
    padding: 0.2rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
}

/* Guarantee */
.guarantee {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.25rem;
    margin-bottom: 1rem;
    font-size: 0.85rem;
    color: var(--gray, #636e72);
}

.guarantee-icon {
    font-size: 1rem;
}

/* Payment Badges */
.payment-badges {
    display: flex;
    justify-content: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
    flex-wrap: wrap;
}

.payment-badge {
    background: var(--light-gray, #f8f9fa);
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    color: var(--gray, #636e72);
}

/* Login Prompt */
.login-prompt {
    text-align: center;
    font-size: 0.85rem;
    color: var(--gray, #636e72);
    margin: 0;
}

.login-prompt a {
    color: var(--primary-color, #2563eb);
    text-decoration: none;
    font-weight: 500;
}

.login-prompt a:hover {
    text-decoration: underline;
}

/* Premium Active State */
.premium-active {
    text-align: center;
    position: relative;
    z-index: 1;
}

.premium-active-icon {
    font-size: 3rem;
    margin-bottom: 0.5rem;
}

.premium-active-title {
    font-size: 1.25rem;
    margin: 0 0 0.5rem 0;
    color: #27ae60;
}

.premium-active-text {
    color: var(--gray, #636e72);
    margin-bottom: 1.5rem;
}

.premium-active-features {
    background: var(--light-gray, #f8f9fa);
    padding: 1rem;
    border-radius: 8px;
    margin-bottom: 1.5rem;
    text-align: left;
}

.premium-active-features p {
    margin: 0.5rem 0;
    font-size: 0.95rem;
}

.btn-outline {
    display: inline-block;
    padding: 0.5rem 1.5rem;
    border: 2px solid var(--primary-color, #2563eb);
    border-radius: 50px;
    color: var(--primary-color, #2563eb);
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-outline:hover {
    background: var(--primary-color, #2563eb);
    color: white;
}

.expiry-text {
    font-size: 0.8rem;
    color: var(--gray, #636e72);
    margin: 0.5rem 0 0 0;
}

/* Responsive */
@media (max-width: 480px) {
    .premium-pricing {
        grid-template-columns: 1fr;
    }
    
    .price-card.popular {
        order: -1;
    }
}
</style>
